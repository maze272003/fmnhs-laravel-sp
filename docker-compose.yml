version: '3.8'

services:
  app:
    # This tells Dokploy to use your 'Dockerfile' in the current directory
    build:
      context: .
      dockerfile: Dockerfile
    
    # Map the container ports to the outside world
    ports:
      - "80:80"     # Web HTTP
      - "6001:6001" # WebSocket
    
    # Restart automatically if it crashes
    restart: always
    
    # Optional: Basic environment setup
    environment:
      - APP_ENV=production
      - CONFERENCE_SIGNALING_PORT=6001